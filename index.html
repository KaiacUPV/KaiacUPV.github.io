<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Test de Conciencia Ecológica en Moda</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 700px;
      margin: 20px auto;
      padding: 10px;
      background: #f5f5f5;
    }
    h1, h2 {
      text-align: center;
    }
    form {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px #ccc;
    }
    .seccion {
      display: none;
    }
    .seccion.active {
      display: block;
    }
    .pregunta {
      margin-bottom: 15px;
    }
    label {
      display: block;
      margin-bottom: 5px;
    }
    input[type="radio"] {
      margin-right: 8px;
    }
    .botones {
      text-align: center;
      margin-top: 20px;
    }
    button {
      background-color: #4CAF50;
      border: none;
      color: white;
      padding: 10px 22px;
      margin: 0 10px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
    }
    button:disabled {
      background-color: #aaa;
      cursor: not-allowed;
    }
    .resultado {
      padding: 20px;
      border-radius: 8px;
      text-align: center;
      font-size: 18px;
      font-weight: bold;
    }
    .resultado.bajo {
      color: #b71c1c;
      background: #ffcdd2;
    }
    .resultado.medio {
      color: #f57f17;
      background: #fff9c4;
    }
    .resultado.alto {
      color: #1b5e20;
      background: #c8e6c9;
    }
  </style>
</head>
<body>

  <h1>Test de Conciencia Ecológica en Moda</h1>
  <form id="formTest" novalidate>
    <!-- Secciones para preguntas -->
    <div class="seccion"></div>
    <div class="seccion"></div>
    <div class="seccion"></div>
    <div class="seccion"></div>
    <div class="seccion"></div>
    <!-- Sección Resultado -->
    <div class="seccion"></div>

    <div class="botones">
      <button type="button" id="btnPrev" disabled>Anterior</button>
      <button type="button" id="btnNext">Siguiente</button>
    </div>
  </form>

  <script>
    const preguntas = [
      // Sección 1: Hábitos de compra y uso (6 preguntas)
      [
        { texto: "¿Con qué frecuencia compras ropa nueva?", opciones: [
          { texto: "Más de una vez al mes", valor: 1 },
          { texto: "Una vez cada 2-3 meses", valor: 2 },
          { texto: "Una vez cada 6 meses o menos", valor: 3 }
        ]},
        { texto: "¿Sueles comprar ropa de segunda mano?", opciones: [
          { texto: "Nunca", valor: 1 },
          { texto: "A veces", valor: 2 },
          { texto: "Frecuentemente", valor: 3 }
        ]},
        { texto: "¿Conservas la ropa que ya tienes por mucho tiempo?", opciones: [
          { texto: "No, la cambio rápido", valor: 1 },
          { texto: "Sí, un tiempo razonable", valor: 2 },
          { texto: "Sí, años o hasta que se desgasta", valor: 3 }
        ]},
        { texto: "¿Reparas o ajustas la ropa antes de desecharla?", opciones: [
          { texto: "Nunca", valor: 1 },
          { texto: "A veces", valor: 2 },
          { texto: "Siempre que puedo", valor: 3 }
        ]},
        { texto: "¿Evitas las modas pasajeras y compras ropa clásica?", opciones: [
          { texto: "No", valor: 1 },
          { texto: "A veces", valor: 2 },
          { texto: "Sí, casi siempre", valor: 3 }
        ]},
        { texto: "¿Sueles prestar atención a la calidad de la ropa que compras?", opciones: [
          { texto: "No", valor: 1 },
          { texto: "A veces", valor: 2 },
          { texto: "Sí, siempre", valor: 3 }
        ]}
      ],
      // Sección 2: Conocimiento y compromiso (6 preguntas)
      [
        { texto: "¿Conoces el impacto ambiental de la industria de la moda?", opciones: [
          { texto: "No", valor: 1 },
          { texto: "Algo", valor: 2 },
          { texto: "Sí, bastante", valor: 3 }
        ]},
        { texto: "¿Lees etiquetas para saber el origen y materiales de la ropa?", opciones: [
          { texto: "No", valor: 1 },
          { texto: "A veces", valor: 2 },
          { texto: "Sí, siempre", valor: 3 }
        ]},
        { texto: "¿Prefieres ropa hecha con materiales orgánicos o reciclados?", opciones: [
          { texto: "No", valor: 1 },
          { texto: "A veces", valor: 2 },
          { texto: "Sí, siempre que puedo", valor: 3 }
        ]},
        { texto: "¿Participas o apoyas campañas de moda sostenible?", opciones: [
          { texto: "No", valor: 1 },
          { texto: "A veces", valor: 2 },
          { texto: "Sí, activamente", valor: 3 }
        ]},
        { texto: "¿Intentas informarte sobre marcas responsables?", opciones: [
          { texto: "No", valor: 1 },
          { texto: "Poco", valor: 2 },
          { texto: "Sí, siempre", valor: 3 }
        ]},
        { texto: "¿Consideras el impacto ambiental al desechar ropa?", opciones: [
          { texto: "No", valor: 1 },
          { texto: "A veces", valor: 2 },
          { texto: "Sí, siempre", valor: 3 }
        ]}
      ],
      // Sección 3: Reciclaje y reutilización (6 preguntas)
      [
        { texto: "¿Separas la ropa que ya no usas para donarla o reciclarla?", opciones: [
          { texto: "No", valor: 1 },
          { texto: "A veces", valor: 2 },
          { texto: "Sí, siempre", valor: 3 }
        ]},
        { texto: "¿Transformas prendas viejas en otras nuevas o diferentes?", opciones: [
          { texto: "Nunca", valor: 1 },
          { texto: "Alguna vez", valor: 2 },
          { texto: "Frecuentemente", valor: 3 }
        ]},
        { texto: "¿Evitas tirar ropa a la basura para reducir residuos?", opciones: [
          { texto: "No", valor: 1 },
          { texto: "A veces", valor: 2 },
          { texto: "Sí, siempre", valor: 3 }
        ]},
        { texto: "¿Usas bolsas reutilizables al comprar ropa?", opciones: [
          { texto: "No", valor: 1 },
          { texto: "A veces", valor: 2 },
          { texto: "Sí, siempre", valor: 3 }
        ]},
        { texto: "¿Prefieres comprar ropa que dure y puedas usar mucho tiempo?", opciones: [
          { texto: "No", valor: 1 },
          { texto: "A veces", valor: 2 },
          { texto: "Sí, casi siempre", valor: 3 }
        ]},
        { texto: "¿Participas en programas de reciclaje textil en tu comunidad?", opciones: [
          { texto: "No", valor: 1 },
          { texto: "No sé que existen", valor: 2 },
          { texto: "Sí, regularmente", valor: 3 }
        ]}
      ],
      // Sección 4: Impacto social y económico (6 preguntas)
      [
        { texto: "¿Consideras las condiciones laborales de quienes fabrican la ropa?", opciones: [
          { texto: "No", valor: 1 },
          { texto: "A veces", valor: 2 },
          { texto: "Sí, siempre", valor: 3 }
        ]},
        { texto: "¿Prefieres marcas locales o con comercio justo?", opciones: [
          { texto: "No", valor: 1 },
          { texto: "A veces", valor: 2 },
          { texto: "Sí, siempre", valor: 3 }
        ]},
        { texto: "¿Evitas marcas que han sido denunciadas por explotación?", opciones: [
          { texto: "No", valor: 1 },
          { texto: "A veces", valor: 2 },
          { texto: "Sí, siempre", valor: 3 }
        ]},
        { texto: "¿Crees que tu forma de comprar puede influir en la industria?", opciones: [
          { texto: "No", valor: 1 },
          { texto: "Un poco", valor: 2 },
          { texto: "Sí, mucho", valor: 3 }
        ]},
        { texto: "¿Promueves el consumo responsable entre amigos y familia?", opciones: [
          { texto: "No", valor: 1 },
          { texto: "A veces", valor: 2 },
          { texto: "Sí, frecuentemente", valor: 3 }
        ]},
        { texto: "¿Participas en iniciativas comunitarias relacionadas con moda sostenible?", opciones: [
          { texto: "No", valor: 1 },
          { texto: "Alguna vez", valor: 2 },
          { texto: "Sí, activamente", valor: 3 }
        ]}
      ],
      // Sección 5: Conclusión y compromiso (6 preguntas)
      [
        { texto: "¿Estarías dispuesto/a a pagar más por ropa sostenible?", opciones: [
          { texto: "No", valor: 1 },
          { texto: "Depende", valor: 2 },
          { texto: "Sí", valor: 3 }
        ]},
        { texto: "¿Estás dispuesto/a a reducir la cantidad de ropa que compras?", opciones: [
          { texto: "No", valor: 1 },
          { texto: "Un poco", valor: 2 },
          { texto: "Sí, mucho", valor: 3 }
        ]},
        { texto: "¿Cambiarías tus hábitos para apoyar la moda ética y ecológica?", opciones: [
          { texto: "No", valor: 1 },
          { texto: "Tal vez", valor: 2 },
          { texto: "Sí", valor: 3 }
        ]},
        { texto: "¿Crees que tus decisiones pueden ayudar a reducir el impacto ambiental?", opciones: [
          { texto: "No", valor: 1 },
          { texto: "Un poco", valor: 2 },
          { texto: "Sí", valor: 3 }
        ]},
        { texto: "¿Estarías dispuesto/a a compartir lo aprendido con otros?", opciones: [
          { texto: "No", valor: 1 },
          { texto: "Tal vez", valor: 2 },
          { texto: "Sí", valor: 3 }
        ]},
        { texto: "¿Quieres comprometerte a seguir mejorando tus hábitos?", opciones: [
          { texto: "No", valor: 1 },
          { texto: "Quizá", valor: 2 },
          { texto: "Sí", valor: 3 }
        ]}
      ]
    ];

    const form = document.getElementById('formTest');
    const secciones = form.querySelectorAll('.seccion');
    const btnPrev = document.getElementById('btnPrev');
    const btnNext = document.getElementById('btnNext');

    let paginaActual = 0;
    const totalPaginas = preguntas.length; // 5 secciones

    // Cargar preguntas en las secciones (excepto la última para resultado)
    for(let i = 0; i < totalPaginas; i++) {
      const seccion = secciones[i];
      if(i < totalPaginas) {
        seccion.classList.add('seccion');
        if(i === 0) seccion.classList.add('active');

        seccion.innerHTML = `<h2>Sección ${i + 1} de ${totalPaginas}</h2>`;
        preguntas[i].forEach((p, idx) => {
          const nombre = `p${i}_${idx}`;
          const div = document.createElement('div');
          div.className = 'pregunta';
          let htmlPregunta = `<p>${p.texto}</p>`;
          p.opciones.forEach((op, opIdx) => {
            htmlPregunta += `
              <label>
                <input type="radio" name="${nombre}" value="${op.valor}" required>
                ${op.texto}
              </label>`;
          });
          div.innerHTML = htmlPregunta;
          seccion.appendChild(div);
        });
      }
    }

    // La última sección es la de resultado y está vacía por ahora
    secciones[totalPaginas].style.display = 'none';

    // Función para mostrar la sección actual
    function mostrarSeccion(n) {
      secciones.forEach((sec, i) => {
        sec.classList.toggle('active', i === n);
      });
      btnPrev.disabled = (n === 0);
      if (n === totalPaginas) {
        btnNext.style.display = 'none';
        btnPrev.style.display = 'none';
      } else {
        btnNext.style.display = 'inline-block';
        btnPrev.style.display = 'inline-block';
      }
    }

    // Validar que todas las preguntas de la sección actual estén contestadas
    function validarSeccion() {
      const inputs = secciones[paginaActual].querySelectorAll('input[type="radio"]');
      const preguntasCount = preguntas[paginaActual].length;
      for(let i = 0; i < preguntasCount; i++) {
        const name = `p${paginaActual}_${i}`;
        if(!secciones[paginaActual].querySelector(`input[name="${name}"]:checked`)) {
          return false;
        }
      }
      return true;
    }

    // Calcular resultado total sumando valores de todas las respuestas
    function calcularResultado() {
      let suma = 0;
      for(let i = 0; i < totalPaginas; i++) {
        preguntas[i].forEach((p, idx) => {
          const selected = form.querySelector(`input[name="p${i}_${idx}"]:checked`);
          if(selected) {
            suma += parseInt(selected.value, 10);
          }
        });
      }
      return suma;
    }

    // Mostrar resultado final con interpretación
    function mostrarResultado() {
      const totalPreguntas = preguntas.flat().length;
      const maxPunt = totalPreguntas * 3; // máximo posible
      const minPunt = totalPreguntas * 1; // mínimo posible
      const punt = calcularResultado();

      let texto = '';
      let claseResultado = '';

      const porcentaje = ((punt - minPunt) / (maxPunt - minPunt)) * 100;

      if(porcentaje < 40) {
        texto = `Tu nivel de conciencia ecológica en moda es Bajo (${punt} puntos).`;
        claseResultado = 'bajo';
      } else if(porcentaje < 70) {
        texto = `Tu nivel de conciencia ecológica en moda es Medio (${punt} puntos).`;
        claseResultado = 'medio';
      } else {
        texto = `¡Excelente! Tu nivel de conciencia ecológica en moda es Alto (${punt} puntos).`;
        claseResultado = 'alto';
      }

      secciones[totalPaginas].innerHTML = `
        <h2>Resultado del Test</h2>
        <div class="resultado ${claseResultado}">${texto}</div>
      `;
      secciones[totalPaginas].style.display = 'block';
      mostrarSeccion(totalPaginas);
    }

    // Manejar botón siguiente
    btnNext.addEventListener('click', () => {
      if (!validarSeccion()) {
        alert('Por favor, responde todas las preguntas antes de continuar.');
        return;
      }
      if(paginaActual < totalPaginas - 1) {
        paginaActual++;
        mostrarSeccion(paginaActual);
      } else {
        // Última sección (resultado)
        mostrarResultado();
      }
    });

    // Manejar botón anterior
    btnPrev.addEventListener('click', () => {
      if(paginaActual > 0) {
        paginaActual--;
        mostrarSeccion(paginaActual);
      }
    });

    // Mostrar la primera sección al cargar
    mostrarSeccion(0);

  </script>
</body>
</html>
